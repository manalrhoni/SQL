/* =============================================================================
R√âSUM√â S√âCURIT√â (DCL) - √Ä CONNA√éTRE

CREATE USER : Cr√©er un nouvel utilisateur (le Login + Mot de passe).

GRANT (Donner) : Donner une permission (Le Feu Vert üü¢).

REVOKE (Retirer): Enlever une permission (Le Feu Rouge üî¥).
=============================================================================
*/

- ==============================================================================
-- Q8 : Limiter l‚Äôutilisation de la base de donn√©es pour l‚Äôadministrateur KIKI.
-- ==============================================================================
-- Analyse : KIKI doit √™tre administrateur (ALL PRIVILEGES) sur la base 'Facturation'.

- 1. Cr√©ation du compte (Si il n'existe pas d√©j√†)
CREATE USER IF NOT EXISTS 'KIKI'@'localhost' IDENTIFIED BY '1234';

- 2. On lui donne le Feu Vert TOTAL (Admin)
GRANT ALL PRIVILEGES ON Facturation.* TO 'KIKI'@'localhost';

- 3. On valide les droits
FLUSH PRIVILEGES;

==============================================================================
-- Q9 : Donner le droit de consulter la table T1 (Facture) pour KAKA et KOKO.
-- ==============================================================================
-- Analyse : On donne juste le droit de lecture (SELECT), pas de modif.

- 1. On cr√©e les utilisateurs (s'ils n'existent pas)
CREATE USER IF NOT EXISTS 'KAKA'@'localhost' IDENTIFIED BY 'pass';
CREATE USER IF NOT EXISTS 'KOKO'@'localhost' IDENTIFIED BY 'pass';

- 2. On donne le Feu Vert "SELECT" uniquement sur la table Facture
GRANT SELECT ON Facture TO 'KAKA'@'localhost';
GRANT SELECT ON Facture TO 'KOKO'@'localhost';

- Maintenant, ils peuvent faire "SELECT * FROM Facture", mais pas "DELETE" ni "UPDATE".

==============================================================================
-- Q10 : Supprimer le droit de consultation de T1 pour KOKO.
-- ==============================================================================
-- Analyse : On utilise REVOKE (Retirer le droit).
-- Syntaxe : REVOKE [Droit] ON [Table] FROM [Utilisateur]

REVOKE SELECT ON Facture FROM 'KOKO'@'localhost';

- R√©sultat : KAKA peut toujours voir la table, mais KOKO est bloqu√©.

==============================================================================
-- Q11 : Supprimer la table T2 (Article).
-- ==============================================================================
-- Analyse : La commande est DROP TABLE.
-- Probl√®me : 'Lign_Fac' pointe vers 'Article'. SQL bloque la suppression par s√©curit√©.

- Solution 1 : On d√©sactive temporairement la v√©rification des cl√©s (Mode "Force")
SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE Article;
SET FOREIGN_KEY_CHECKS = 1; -- On r√©active la s√©curit√© apr√®s

- Solution 2 (M√©thode douce) : On supprime d'abord la table fille
-- DROP TABLE Lign_Fac;
-- DROP TABLE Article;
